"use strict";(self["webpackChunkvue_toutiao"]=self["webpackChunkvue_toutiao"]||[]).push([[214],{2214:function(t,s,i){i.r(s),i.d(s,{default:function(){return A}});var e=function(){var t=this,s=t._self._c;return s("div",{on:{touchmove:t.backTop}},[s("form",{staticClass:"search_top",attrs:{action:"/"}},[s("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":"","aria-autocomplete":"",autofocus:""},on:{search:t.onSearch,focus:function(s){return t.focus(t.value)},cancel:t.onCancel,input:t.input,blur:t.blur},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),t.ishistory?s("div",{staticClass:"box_history"},[s("div",{staticClass:"suosou_history"},[s("p",[t._v("搜索历史")]),s("van-icon",{attrs:{name:"delete-o"},on:{click:t.del}})],1),s("div",t._l(t.arr,(function(i,e){return s("van-cell",{key:e,staticClass:"history",attrs:{title:i,"is-link":""},on:{click:function(s){return t.sousuohistory(i)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-icon",{attrs:{name:"cross",size:"20"},on:{click:function(s){return s.stopPropagation(),t.delete_history(e)}}})]},proxy:!0}],null,!0)})})),1)]):s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}]},t._l(t.list,(function(i,e){return s("van-cell",{key:e,staticClass:"history",attrs:{title:i.title},on:{click:function(s){return t.sousuohistory(i.title)}}})})),1),s("sousuo-list",{directives:[{name:"show",rawName:"v-show",value:t.sou,expression:"sou"}],staticClass:"leibiaojieguo",attrs:{val:t.val}}),s("a",{directives:[{name:"show",rawName:"v-show",value:t.isShow1,expression:"isShow1"}],staticClass:"top",attrs:{href:"#"},on:{click:t.top}},[s("van-icon",{staticClass:"topimg",attrs:{name:"back-top",size:"25"}})],1)],1)},a=[],o=(i(2443),i(9864)),n=(i(7322),i(6631)),l=(i(5825),i(9858)),r=(i(1958),i(3332),i(6742),i(3094),i(7984),i(3915)),c=i.n(r),h=i(9299),u=i(855),d=i(4771),v=i(5781),p=i(7061),m=(0,u.d)("search"),f=m[0],g=m[1],y=m[2];function b(t,s,i,e){function a(){if(i.label||s.label)return t("div",{class:g("label")},[i.label?i.label():s.label])}function o(){if(s.showAction)return t("div",{class:g("action"),attrs:{role:"button",tabindex:"0"},on:{click:a}},[i.action?i.action():s.actionText||y("cancel")]);function a(){i.action||((0,d.j8)(e,"input",""),(0,d.j8)(e,"cancel"))}}var n={attrs:e.data.attrs,on:(0,h.Z)({},e.listeners,{keypress:function(t){13===t.keyCode&&((0,v.PF)(t),(0,d.j8)(e,"search",s.value)),(0,d.j8)(e,"keypress",t)}})},l=(0,d.ED)(e);return l.attrs=void 0,t("div",c()([{class:g({"show-action":s.showAction}),style:{background:s.background}},l]),[null==i.left?void 0:i.left(),t("div",{class:g("content",s.shape)},[a(),t(p.Z,c()([{attrs:{type:"search",border:!1,value:s.value,leftIcon:s.leftIcon,rightIcon:s.rightIcon,clearable:s.clearable,clearTrigger:s.clearTrigger},scopedSlots:{"left-icon":i["left-icon"],"right-icon":i["right-icon"]}},n]))]),o()])}b.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var k=f(b),w=(i(8146),i(8848)),_=(i(541),i(7658),function(){var t=this,s=t._self._c;return s("div",{staticClass:"list-content"},[s("van-list",{attrs:{finished:t.finished,offset:"","finished-text":"没有更多了"},on:{load:function(s){return t.onLoad(t.val)}},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(i,e){return s("van-cell",{key:e,on:{click:function(s){return t.jinruxq(i._id)}}},[i.imageSrc.length>1?s("div",{staticClass:"content1"},[s("h3",[t._v(t._s(i.title))]),s("div",{staticClass:"content-img"},t._l(i.imageSrc,(function(t,i){return s("div",{key:i,staticClass:"content-div"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item1"}],attrs:{src:t,alt:""}})])})),0)]):s("div",{staticClass:"content"},[s("h3",[t._v(t._s(i.title))]),t._l(i.imageSrc,(function(t,i){return s("div",{key:i,staticClass:"content-img"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item1"}],attrs:{src:t,alt:""}})])}))],2),s("div",{staticClass:"content-bottom"},[s("p",[t._v("作者"+t._s(i.author))]),s("p",[t._v(t._s(i.comment)+"评论")]),s("p",[t._v("发布时间"+t._s(t.ontime(i.time)))]),s("div",[s("van-icon",{attrs:{name:"cross"}})],1)])])})),1)],1)}),S=[],Z=(i(6791),i(4269)),C=(i(446),i(8186)),x=(i(2763),i(5094)),I=i(70),j={name:"sousuolist",components:{[l.Z.name]:l.Z,[x.Z.name]:x.Z,[C.Z.name]:C.Z,[Z.Z.name]:Z.Z,[n.Z.name]:n.Z},data(){return{loading:!1,finished:!1,list:[],skip:0}},props:["val"],methods:{onLoad(t){(0,I.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/search",data:{key_word:t,skip:this.list.length,limit:10}}).then((t=>{this.list.push(...t.data.data),this.loading=!1,console.log(t),this.list.length>=t.data.count&&(this.finished=!0)})),this.finished=!1},jinruxq(t){this.$router.push({name:"listcontent",query:{id:t}})}},watch:{val(t){this.list=[],t.trim()&&this.onLoad(t)}},created(){}},T=j,z=i(1001),N=(0,z.Z)(T,_,S,!1,null,"4dab944c",null),q=N.exports,B={name:"search",data(){return{value:"",arr:[],sou:!1,val:"",ishistory:!0,list:[],isshow:!1,isShow1:!1}},components:{sousuoList:q,[w.Z.name]:w.Z,[k.name]:k,[l.Z.name]:l.Z,[n.Z.name]:n.Z,[o.Z.name]:o.Z},methods:{onSearch(t){0===t.trim().length||(this.ishistory=!1,this.isshow=!1,this.sou=!0,this.arr.unshift(t.trim()),this.arr=[...new Set(this.arr)],this.val=t.trim(),localStorage.setItem("sousuohistory",this.arr))},input(){this.ishistory=!1,this.isshow=!0,this.list=[],0===this.value.trim().length?this.ishistory=!0:(this.$axios({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/search",data:{key_word:this.value,skip:this.list.length,limit:15}}).then((t=>{this.value.trim().length,this.list.push(...t.data.data),this.loading=!1,this.list.length>=t.data.count&&(this.finished=!0)})),this.finished=!1)},onCancel(){this.list=[],this.$router.push("/home"),this.value="",this.val="",this.ishistory=!0},del(){this.arr=[],localStorage.setItem("sousuohistory",this.arr)},focus(){this.ishistory=!1,this.sou=!1,this.isshow=!0,0===this.value.trim().length&&(this.ishistory=!0,this.isshow=!1),this.gangjin()},blur(){},sousuohistory(t){this.value=t,this.onSearch(t)},delete_history(t){this.arr.splice(t,1),localStorage.setItem("sousuohistory",this.arr)},backTop(t){t.view.pageYOffset>=1500?this.isShow1=!0:this.isShow1=!1},top(){this.isShow1=!1},gangjin(){0===this.value.trim().length||(this.$axios({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/search",data:{key_word:this.value,skip:this.list.length,limit:15}}).then((t=>{this.list.push(...t.data.data),this.loading=!1,this.list.length>=t.data.count&&(this.finished=!0)})),this.finished=!1)}},mounted(){let t=localStorage.getItem("sousuohistory");this.arr=t.split(","),this.isshow=!0,this.value=""},created(){},activated(){}},L=B,$=(0,z.Z)(L,e,a,!1,null,"ad6b4db4",null),A=$.exports},9864:function(t,s,i){var e=i(3915),a=i.n(e),o=i(855),n=i(4771),l=i(1047),r=(0,o.d)("cell-group"),c=r[0],h=r[1];function u(t,s,i,e){var o,r=t("div",a()([{class:[h({inset:s.inset}),(o={},o[l.r5]=s.border,o)]},(0,n.ED)(e,!0)]),[null==i.default?void 0:i.default()]);return s.title||i.title?t("div",{key:e.data.key},[t("div",{class:h("title",{inset:s.inset})},[i.title?i.title():s.title]),r]):r}u.props={title:String,inset:Boolean,border:{type:Boolean,default:!0}},s["Z"]=c(u)},2443:function(t,s,i){i(1958)}}]);
//# sourceMappingURL=214.3d54d5c2.js.map